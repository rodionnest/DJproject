{% extends 'flatpages/default.html' %}

{% load custom_filters %}

{% block title %}Новости{% endblock title %}

{% block content %}

<h1>Все посты</h1>
<p>Всего: {{ news|length }}</p>

{% if news %}

<table class='table'>
    <tr>
        <td><span class='font-weight-bold'>Заголовок</span></td>
        <td align=center><span class='font-weight-bold text-nowrap'>Дата публикации</td>
        <td><span class='font-weight-bold'>Текст</td>
        <td><span class='font-weight-bold'></td>
    </tr>
    {% for new in news %}
    <tr>
        <td>{{ new.title|censor }}</td>
        <td class='text-center'>{{ new.datetime|date:'d.m.y h:m' }}</td>
        <td>{{ new.text|truncatewords:20|censor }}</td>
        <td><a href="/news/{{ new.pk }}">Перейти</a></td>
    </tr>
    {% endfor %}
</table>

{% else %}
<h2>Постов нет!</h2>
{% endif %}

{% endblock content %}